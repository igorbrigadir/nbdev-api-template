# See https://pre-commit.com for more information
# See https://pre-commit.com/hooks.html for more hooks
repos:
    -   repo: https://github.com/pre-commit/pre-commit-hooks
        rev: 'v2.4.0'
        hooks:
        -   id: trailing-whitespace
            exclude: .ipynb
        -   id: end-of-file-fixer
            exclude: .ipynb
        -   id: check-yaml
        -   id: check-added-large-files
    -   repo: https://gitlab.com/PyCQA/flake8
        rev: '3.8.3'
        hooks:
        -   id: flake8
            additional_dependencies: [flake8-typing-imports==1.6.0]
    -   repo: https://github.com/psf/black
        rev: '19.10b0'
        hooks:
        -   id: black
            language_version: python3.8
    -   repo: local
        hooks:
        -   id: nbdev_build_lib
            name: nbdev_build_lib
            entry: nbdev_build_lib --fname
            files: .ipynb
            language: python
    -   repo: local
        hooks:
        -   id: nbdev_clean_nbs
            name: nbdev_clean_nbs
            entry: nbdev_clean_nbs --fname
            files: .ipynb
            language: python
    -   repo: local
        hooks:
            -   id: tests
                name: run tests
                entry: pytest -v #-m fast
                language: python
                additional_dependencies: [pre-commit, pytest]
                always_run: true
                pass_filenames: false
                types: [python]
                stages: [commit]
    -   repo: local
        hooks:
            -   id: tests
                name: run tests
                entry: pytest -x
                language: system
                types: [python]
                stages: [push]
